.pin-tray {
  --size: 38ch;
  --height: calc(5ch + 1lh + var(--block-space));

  block-size: var(--height);
  inline-size: var(--size);
  inset: auto auto var(--block-space-half) var(--inline-space);
  padding: var(--block-space-half) var(--inline-space);
  position: fixed;
  z-index: 1;

  .pin {
    --offset: calc((var(--position) - 1) * (var(--block-space) * -1));
    --position: 1;
    --scale: calc(1 - var(--position) / 30);
    --z: calc(10 - var(--position));

    inset: auto auto 0;
    inline-size: var(--size);
    outline: 0;
    pointer-events: none;
    position: absolute;
    scale: var(--scale);
    transform: translateY(var(--offset));
    transform-origin: center;
    transition: scale 0.2s ease-out, transform 0.2s ease-out;
    z-index: var(--z);

    &:nth-child(1) { --position: 1; }
    &:nth-child(2) { --position: 2; }
    &:nth-child(3) { --position: 3; }
    &:nth-child(4) { --position: 4; }
    &:nth-child(5) { --position: 5; }
    &:nth-child(6) { --position: 6; }
    &:nth-child(7) { --position: 7; }
    &:nth-child(8) { --position: 8; }
    &:nth-child(9) { --position: 9; }
    &:nth-child(10) { --position: 10; }

    &:nth-child(1n + 11) { display: none; }

    .pin-tray[open] & {
      --scale: 1;
      --offset: calc((100% + var(--block-space-half)) * (var(--position) * -1));

      margin-block-end: calc(var(--block-space) * -1);
      pointer-events: unset;
    }

    .pin-tray:has(.pin:only-child) & {
      pointer-events: unset;
    }
  }
}

.pin-tray__actions {
  opacity: 0;
  scale: calc(1 - 1 / 30);
  transform: translateY(100%);
  transition: opacity 0.2s ease-out, scale 0.2s ease-out, transform 0.2s ease-out;

  .pin-tray[open] & {
    opacity: 1;
    scale: 1;
    transform: translateY(0);
  }

  .pin-tray:not(:has(.pin)) & {
    opacity: 1;
    scale: 1;
    transform: none;
    transition: none;

    .pin-tray__all_action {
      display: none;
    }
  }
}

.pin-tray__expander {
  --hover-size: 0;
  --outline-size: 0;

  cursor: pointer;
  inset: 0;
  position: absolute;
  z-index: 6;

  .pin-tray[open] &,
  .pin-tray:not(:has(.pin)) &,
  .pin-tray:has(.pin:only-child) & {
    display: none;
  }
}

.pin__bucket {
  background-color: var(--bubble-color);
  font-weight: 800;
  letter-spacing: 0.5ch;
  padding: 0.3em 0.9em 0.3em 1em;
}

.pin__content {
  border: 0;
  border-radius: 0.2em;
  color: var(--color-ink);
  overflow: clip;
  padding: 1em 1em 1.2em;

  .notificiations-list--read & {
    border: 1px solid var(--color-subtle);
    box-shadow: none;
  }
}

.pin__header {
  margin: -1em -1em auto;
  padding: 0 0.3em 0 0;
}

.pin__meta {
  font-size: 0.9em;
  font-weight: 500;
}

.pin__stage {
  --border-color: currentColor;

  padding: 0.2em 0.5em;
}

.pin__tags {
  color: var(--bubble-color);
}

.pin__title {
  margin-block-start: 0.3rem;
}